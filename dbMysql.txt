CREATE TABLE admin (
    id_admin INT PRIMARY KEY AUTO_INCREMENT,
    ten_admin VARCHAR(255) NOT NULL,
    login VARCHAR(255) UNIQUE NOT NULL,
    pass VARCHAR(255) NOT NULL
) ENGINE=InnoDB;

CREATE TABLE hocsinh (
    id_hocsinh INT PRIMARY KEY AUTO_INCREMENT,
    ten_hocsinh VARCHAR(255) NOT NULL,
    tendangnhap VARCHAR(255) UNIQUE NOT NULL,
    matkhau VARCHAR(255) NOT NULL,
    email VARCHAR(255) UNIQUE NOT NULL,
    phone VARCHAR(20) UNIQUE NOT NULL
) ENGINE=InnoDB;

CREATE TABLE giaovien (
    id_giaovien INT PRIMARY KEY AUTO_INCREMENT,
    ten_giaovien VARCHAR(255) NOT NULL,
    tendangnhap_gv VARCHAR(255) UNIQUE NOT NULL,
    matkhau_gv VARCHAR(255) NOT NULL,
    email_gv VARCHAR(255) UNIQUE NOT NULL,
    phone_gv VARCHAR(20) UNIQUE NOT NULL,
    monchinh VARCHAR(255) NOT NULL,
    lopdaychinh VARCHAR(255) NOT NULL
) ENGINE=InnoDB;

CREATE TABLE monhoc (
    id_monhoc INT PRIMARY KEY AUTO_INCREMENT,
    tenmonhoc VARCHAR(255) NOT NULL
) ENGINE=InnoDB;

CREATE TABLE dethi (
    id_dethi INT PRIMARY KEY AUTO_INCREMENT,
    id_giaovien INT,
    id_monhoc INT,
    ngay_tao DATE NOT NULL,
    thoigianthi INT NOT NULL,
    thoigianbatdau DATETIME NOT NULL,
    thoigianketthuc DATETIME NOT NULL,
    trangthai VARCHAR(50) NOT NULL,
    FOREIGN KEY (id_giaovien) REFERENCES giaovien(id_giaovien),
    FOREIGN KEY (id_monhoc) REFERENCES monhoc(id_monhoc)
) ENGINE=InnoDB;

CREATE TABLE cauhoi (
    id_cauhoi INT PRIMARY KEY AUTO_INCREMENT,
    noidungcauhoi TEXT NOT NULL,
    dapan TEXT NOT NULL,
    id_monhoc INT,
    FOREIGN KEY (id_monhoc) REFERENCES monhoc(id_monhoc)
) ENGINE=InnoDB;

CREATE TABLE cautraloi (
    id_cautraloi INT PRIMARY KEY AUTO_INCREMENT,
    id_cauhoi INT,
    noidungcautraloi TEXT NOT NULL,
    FOREIGN KEY (id_cauhoi) REFERENCES cauhoi(id_cauhoi)
) ENGINE=InnoDB;

CREATE TABLE baithi (
    id_baithi INT PRIMARY KEY AUTO_INCREMENT,
    id_hocsinh INT,
    id_dethi INT,
    ngaylam DATE NOT NULL,
    trangthai VARCHAR(50) NOT NULL,
    diemthi FLOAT,
    FOREIGN KEY (id_hocsinh) REFERENCES hocsinh(id_hocsinh),
    FOREIGN KEY (id_dethi) REFERENCES dethi(id_dethi)
) ENGINE=InnoDB;